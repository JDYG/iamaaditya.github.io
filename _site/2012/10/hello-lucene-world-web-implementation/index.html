<!DOCTYPE html>
<html>
  <head>
    <script src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML" type="text/javascript"> </script>
    <link href='http://fonts.googleapis.com/css?family=Ovo' rel='stylesheet' type='text/css'>

    <title>Hello &#8216;Lucene&#8217; World &#8211; Web Implementation – Aaditya Prakash (Adi) – Random Musings of Computer Vision grad student</title>

        <meta charset="utf-8" />
    <meta content='text/html; charset=utf-8' http-equiv='Content-Type'>
    <meta http-equiv='X-UA-Compatible' content='IE=edge'>
    <meta name='viewport' content='width=device-width, initial-scale=1.0, maximum-scale=1.0'>

    
    <meta name="description" content="Lucene is a Java Library by Apache used extensively for making custom search engines and indexing. Here are few of the features of Lucene, straight from the Lucene’s homepage :

" />
    <meta property="og:description" content="Lucene is a Java Library by Apache used extensively for making custom search engines and indexing. Here are few of the features of Lucene, straight from the Lucene’s homepage :

" />
    
    <meta name="author" content="Aaditya Prakash (Adi)" />

    
    <meta property="og:title" content="Hello &#8216;Lucene&#8217; World &#8211; Web Implementation" />
    <meta property="twitter:title" content="Hello &#8216;Lucene&#8217; World &#8211; Web Implementation" />
    

    <!--[if lt IE 9]>
      <script src="http://html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->

    <link rel="stylesheet" type="text/css" href="/style.css" />
    <link rel="alternate" type="application/rss+xml" title="Aaditya Prakash (Adi) - Random Musings of Computer Vision grad student" href="/feed.xml" />

    <!-- Created with Jekyll Now - http://github.com/barryclark/jekyll-now -->
  </head>

  <body>
    <div class="wrapper-masthead">
      <div class="container">
        <header class="masthead clearfix">
          <a href="/" class="site-avatar"><img src="https://raw.githubusercontent.com/iamaaditya/iamaaditya.github.io/master/images/profile_image.jpg" /></a>

          <div class="site-info">
            <h1 class="site-name"><a href="/">Aaditya Prakash (Adi)</a></h1>
            <p class="site-description">Random Musings of Computer Vision grad student</p>
          </div>

          <nav>
            <a href="/">Blog</a>
            <a href="/research">Research</a>
            <a href="/notes">Notes</a>
            <a href="/about">About</a>
          </nav>
        </header>
      </div>
    </div>

    <div id="main" role="main" class="container">
      <article class="post">
  <h1>Hello &#8216;Lucene&#8217; World &#8211; Web Implementation</h1>

  <div class="entry">
    <p>Lucene is a Java Library by Apache used extensively for making custom search engines and indexing. Here are few of the features of Lucene, straight from the <a title="Lucene from Apache" href="http://lucene.apache.org/core/" target="_blank">Lucene’s homepage</a> :</p>

<blockquote>
  <p id="scalable-high-performance-indexing">
  <strong>Scalable, High-Performance Indexing</strong>
</p>

  <ul>
    <li>over 95GB/hour on modern hardware</li>
    <li>small RAM requirements — only 1MB heap</li>
    <li>incremental indexing as fast as batch indexing</li>
    <li>index size roughly 20-30% the size of text indexed</li>
  </ul>

  <p id="powerful-accurate-and-efficient-search-algorithms">
  <strong>Powerful, Accurate and Efficient Search Algorithms</strong>
</p>

  <ul>
    <li>ranked searching — best results returned first</li>
    <li>many powerful query types: phrase queries, wildcard queries, proximity queries, range queries and more</li>
    <li>fielded searching (e.g., title, author, contents)</li>
    <li>date-range searching</li>
    <li>sorting by any field</li>
    <li>multiple-index searching with merged results</li>
    <li>allows simultaneous update and searching</li>
  </ul>
</blockquote>

<div>
  If you want a quick 5 min tutorial on Lucene, <a title="Lucene in 5 min" href="http://www.lucenetutorial.com/lucene-in-5-minutes.html" target="_blank">here you go</a>. Once you seen the structure of Lucene it would be nice to have hello world implementation of it so that you could see it&#8217;s working in the barebone structure. Recently I had the similar problem; while there were numerous examples of Lucene implementation I couldn&#8217;t find the minimal &#8216;hello world&#8217; implementation of web search using Lucene. I am a old-school, to understand working of a new language or library, I like to see the minimal implementation upon which I love to tinker.
</div>

<div>
  Thus, inability to find anything like that made me write one. Therefore I present you &#8220;Hello World&#8221; with Lucene Web interface.
</div>

<div>
  Note:
</div>

<div>
  -You need to have Lucene Library installed and index built (see the 5 min tutorial link above)
</div>

<div>
  -For real application it is not a good and safe practice to write Java inside JSP, instead you use servlets
</div>

<div>
  -This is not intended to be Lucene tutorial or Lucene best practice. This code is minimal required code to have a crude sample web search engine running on Lucene.
</div>

<h2 id="code">Code</h2>

<div class="wp_syntax">
  <table>
    <tr>
      <td class="line_numbers">
        <pre>1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68
69
70
71
72
73
74
75
76
77
</pre>
      </td>
      
      <td class="code">
        <pre class="html4strict" style="font-family:monospace;"><span style="color: #00bbdd;">&lt;!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"</span>
<span style="color: #00bbdd;">   "http://www.w3.org/TR/html4/loose.dtd"&gt;</span>
<span style="color: #009900;">&lt;!</span>
<span style="color: #009900;">	Project	:		Lucened Enabled Simple <span style="color: #000066;">Text</span> Search</span>
<span style="color: #009900;">	Author	:		Aaditya Prakash</span>
<span style="color: #009900;">	Date	:		<span style="color: #cc66cc;">25</span>- Sep-<span style="color: #cc66cc;">2012</span> <span style="color: #cc66cc;">16</span>:<span style="color: #cc66cc;">21</span></span>
<span style="color: #009900;">--&gt;</span>
&nbsp;
<span style="color: #009900;">&lt;%@ page import<span style="color: #66cc66;">=</span><span style="color: #ff0000;">"SearchWebCall"</span> %&gt;</span>
&nbsp;
<span style="color: #009900;">&lt;<span style="color: #000000; font-weight: bold;">html</span>&gt;</span>
&nbsp;
<span style="color: #009900;">&lt;<span style="color: #000000; font-weight: bold;">head</span>&gt;</span>
	<span style="color: #009900;">&lt;<span style="color: #000000; font-weight: bold;">title</span>&gt;</span> Lucene Enabled Simple Text Search <span style="color: #009900;">&lt;<span style="color: #66cc66;">/</span><span style="color: #000000; font-weight: bold;">title</span>&gt;</span>
&nbsp;
	<span style="color: #009900;">&lt;<span style="color: #000000; font-weight: bold;">script</span> <span style="color: #000066;">type</span><span style="color: #66cc66;">=</span><span style="color: #ff0000;">"text/javascript"</span>&gt;</span>
&nbsp;
	<span style="color: #808080; font-style: italic;">&lt;!-- Validation to prevent some characters, </span>
<span style="color: #808080; font-style: italic;">	currently Lucene Doesn't parse these characters --&gt;</span>
			function isSpclChar(){
				var iChars = "!@#^<span style="color: #ddbb00;">&amp;</span>*()+=-[]\\\';,./{}|~`\":<span style="color: #009900;">&lt;&gt;</span>?";
				for (var i = 0; i <span style="color: #009900;">&lt; document.lucene.input.<span style="color: #000066;">value</span>.length; i++<span style="color: #66cc66;">&#41;</span> <span style="color: #66cc66;">&#123;</span></span>
<span style="color: #009900;">					if <span style="color: #66cc66;">&#40;</span>iChars.indexOf<span style="color: #66cc66;">&#40;</span>document.lucene.input.<span style="color: #000066;">value</span>.charAt<span style="color: #66cc66;">&#40;</span>i<span style="color: #66cc66;">&#41;</span><span style="color: #66cc66;">&#41;</span> !<span style="color: #66cc66;">=</span> -<span style="color: #cc66cc;">1</span><span style="color: #66cc66;">&#41;</span> <span style="color: #66cc66;">&#123;</span></span>
<span style="color: #009900;">						<span style="color: #66cc66;">//</span>throwback the unallowed character</span>
<span style="color: #009900;">						document.lucene.input.<span style="color: #000066;">value</span> <span style="color: #66cc66;">=</span> document.lucene.input.<span style="color: #000066;">value</span>.slice<span style="color: #66cc66;">&#40;</span><span style="color: #cc66cc;"></span>,-<span style="color: #cc66cc;">1</span><span style="color: #66cc66;">&#41;</span>;</span>
<span style="color: #009900;">						return false;</span>
<span style="color: #009900;">					<span style="color: #66cc66;">&#125;</span></span>
<span style="color: #009900;">				<span style="color: #66cc66;">&#125;</span></span>
<span style="color: #009900;">			<span style="color: #66cc66;">&#125;</span></span>
&nbsp;
<span style="color: #009900;">	&lt;<span style="color: #66cc66;">/</span><span style="color: #000000; font-weight: bold;">script</span>&gt;</span>
&nbsp;
<span style="color: #009900;">&lt;<span style="color: #66cc66;">/</span><span style="color: #000000; font-weight: bold;">head</span>&gt;</span>
&nbsp;
<span style="color: #009900;">&lt;<span style="color: #000000; font-weight: bold;">body</span>&gt;</span>
&nbsp;
<span style="color: #009900;">&lt;<span style="color: #000000; font-weight: bold;">h1</span>&gt;</span>Lucene Enabled Simple Text Search <span style="color: #009900;">&lt;<span style="color: #66cc66;">/</span><span style="color: #000000; font-weight: bold;">h1</span>&gt;</span>
&nbsp;
<span style="color: #009900;">&lt;<span style="color: #000000; font-weight: bold;">form</span> <span style="color: #000066;">name</span><span style="color: #66cc66;">=</span><span style="color: #ff0000;">"lucene"</span> <span style="color: #000066;">action</span><span style="color: #66cc66;">=</span><span style="color: #ff0000;">"index.jsp"</span> <span style="color: #000066;">method</span><span style="color: #66cc66;">=</span><span style="color: #ff0000;">"get"</span>&gt;</span>
		<span style="color: #009900;">&lt;<span style="color: #000000; font-weight: bold;">input</span> <span style="color: #000066;">name</span><span style="color: #66cc66;">=</span><span style="color: #ff0000;">"input"</span> <span style="color: #000066;">size</span><span style="color: #66cc66;">=</span><span style="color: #ff0000;">"30"</span> <span style="color: #000066;">id</span><span style="color: #66cc66;">=</span><span style="color: #ff0000;">"input"</span> <span style="color: #000066;">onkeyup</span><span style="color: #66cc66;">=</span><span style="color: #ff0000;">"isSpclChar()"</span><span style="color: #66cc66;">/</span>&gt;</span>
		<span style="color: #009900;">&lt;<span style="color: #000000; font-weight: bold;">br</span> <span style="color: #66cc66;">/</span>&gt;</span>
		<span style="color: #009900;">&lt;<span style="color: #000000; font-weight: bold;">input</span> <span style="color: #000066;">type</span><span style="color: #66cc66;">=</span><span style="color: #ff0000;">"submit"</span> <span style="color: #000066;">value</span><span style="color: #66cc66;">=</span><span style="color: #ff0000;">"Search"</span> <span style="color: #66cc66;">/</span>&gt;</span>
<span style="color: #009900;">&lt;<span style="color: #66cc66;">/</span><span style="color: #000000; font-weight: bold;">form</span>&gt;</span>
&nbsp;
<span style="color: #009900;">&lt;<span style="color: #000000; font-weight: bold;">br</span> <span style="color: #66cc66;">/</span>&gt;</span>
&nbsp;
<span style="color: #009900;">&lt;%</span>
<span style="color: #009900;">	String searchString<span style="color: #66cc66;">&#91;</span><span style="color: #66cc66;">&#93;</span> <span style="color: #66cc66;">=</span> new String<span style="color: #66cc66;">&#91;</span><span style="color: #cc66cc;">2</span><span style="color: #66cc66;">&#93;</span>;</span>
<span style="color: #009900;">	String result<span style="color: #66cc66;">&#91;</span><span style="color: #66cc66;">&#93;</span> <span style="color: #66cc66;">=</span> new String<span style="color: #66cc66;">&#91;</span><span style="color: #cc66cc;">100</span><span style="color: #66cc66;">&#93;</span>;</span>
<span style="color: #009900;">	searchString<span style="color: #66cc66;">&#91;</span><span style="color: #cc66cc;"></span><span style="color: #66cc66;">&#93;</span> <span style="color: #66cc66;">=</span> <span style="color: #ff0000;">"-query"</span>;</span>
<span style="color: #009900;">	searchString<span style="color: #66cc66;">&#91;</span><span style="color: #cc66cc;">1</span><span style="color: #66cc66;">&#93;</span> <span style="color: #66cc66;">=</span> request.getParameter<span style="color: #66cc66;">&#40;</span><span style="color: #ff0000;">"input"</span><span style="color: #66cc66;">&#41;</span>;</span>
&nbsp;
<span style="color: #009900;">	if<span style="color: #66cc66;">&#40;</span>searchString<span style="color: #66cc66;">&#91;</span><span style="color: #cc66cc;">1</span><span style="color: #66cc66;">&#93;</span> !<span style="color: #66cc66;">=</span> null<span style="color: #66cc66;">&#41;</span> <span style="color: #66cc66;">&#123;</span></span>
<span style="color: #009900;">		<span style="color: #66cc66;">//</span> send the Search term to obtain the result, </span>
<span style="color: #009900;">		<span style="color: #66cc66;">//</span>all processing happens in the <span style="color: #000066;">class</span> </span>
<span style="color: #009900;">		<span style="color: #66cc66;">//</span><span style="color: #66cc66;">&#40;</span>keeping jsp <span style="color: #000066;">code</span> to minimum<span style="color: #66cc66;">&#41;</span></span>
<span style="color: #009900;">		result <span style="color: #66cc66;">=</span> SearchWebCall.filter<span style="color: #66cc66;">&#40;</span>searchString<span style="color: #66cc66;">&#41;</span>;</span>
<span style="color: #009900;">		int noOfMatch<span style="color: #66cc66;">=</span><span style="color: #cc66cc;"></span>;</span>
&nbsp;
<span style="color: #009900;">		out.print<span style="color: #66cc66;">&#40;</span><span style="color: #ff0000;">"Search Result of : &lt;b&gt;</span></span>" + searchString[1] + "<span style="color: #009900;">&lt;<span style="color: #66cc66;">/</span><span style="color: #000000; font-weight: bold;">b</span>&gt;&lt;<span style="color: #66cc66;">/</span><span style="color: #000000; font-weight: bold;">br</span>&gt;&lt;<span style="color: #66cc66;">/</span><span style="color: #000000; font-weight: bold;">br</span>&gt;</span>");
		for(int i=0; i<span style="color: #009900;">&lt; result.length; i++<span style="color: #66cc66;">&#41;</span><span style="color: #66cc66;">&#123;</span></span>
&nbsp;
<span style="color: #009900;">			<span style="color: #66cc66;">//</span>format the results</span>
<span style="color: #009900;">			if <span style="color: #66cc66;">&#40;</span>result<span style="color: #66cc66;">&#91;</span>i<span style="color: #66cc66;">&#93;</span> !<span style="color: #66cc66;">=</span> null<span style="color: #66cc66;">&#41;</span> <span style="color: #66cc66;">&#123;</span></span>
<span style="color: #009900;">				out.print<span style="color: #66cc66;">&#40;</span>i+<span style="color: #cc66cc;">1</span> + <span style="color: #ff0000;">". "</span><span style="color: #66cc66;">&#41;</span>;</span>
<span style="color: #009900;">				<span style="color: #66cc66;">//</span>results are displayed as hyperlinks to faciliate information retrieval</span>
<span style="color: #009900;">				out.print<span style="color: #66cc66;">&#40;</span><span style="color: #ff0000;">"&lt;a href=\"</span><span style="color: #ff0000;">"+result[i]+"</span>\<span style="color: #ff0000;">"&gt;</span></span>"+result[i]+"<span style="color: #009900;">&lt;<span style="color: #66cc66;">/</span><span style="color: #000000; font-weight: bold;">a</span>&gt;</span>");
				out.print("<span style="color: #009900;">&lt;<span style="color: #000000; font-weight: bold;">br</span> <span style="color: #66cc66;">/</span>&gt;</span>");
				noOfMatch++;
			}
		}
		out.print("<span style="color: #009900;">&lt;<span style="color: #000000; font-weight: bold;">h2</span>&gt;&lt;<span style="color: #000000; font-weight: bold;">p</span>&gt;</span> No. of Matches: " + noOfMatch+ " <span style="color: #009900;">&lt;<span style="color: #66cc66;">/</span><span style="color: #000000; font-weight: bold;">h2</span>&gt;</span>");
	}
//end of JSP
%&gt;
<span style="color: #009900;">&lt;<span style="color: #66cc66;">/</span><span style="color: #000000; font-weight: bold;">body</span>&gt;</span>
<span style="color: #009900;">&lt;<span style="color: #66cc66;">/</span><span style="color: #000000; font-weight: bold;">html</span>&gt;</span></pre>
      </td>
    </tr>
  </table>
</div>

  </div>

  <div class="date">
    Written on October 20, 2012
  </div>

  
<div class="comments">
	<div id="disqus_thread"></div>
	<script type="text/javascript">

	    var disqus_shortname = 'iamaaditya';

	    (function() {
	        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
	        dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
	        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
	    })();

	</script>
	<noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
</div>

</article>

    </div>

    <div class="wrapper-footer">
      <div class="container">
        <footer class="footer">
          
<a href="mailto:aprakash [at] brandeis . edu"><i class="svg-icon email"></i></a>


<a href="https://github.com/iamaaditya"><i class="svg-icon github"></i></a>

<a href="https://www.linkedin.com/in/aaditya-prakash-68453338"><i class="svg-icon linkedin"></i></a>

<a href="/feed.xml"><i class="svg-icon rss"></i></a>
<a href="https://www.twitter.com/aaditya_prakash"><i class="svg-icon twitter"></i></a>


<a href="https://plus.google.com//u/0/100303074762902184969?rel=author"><i class="svg-icon googleplus"></i></a>
          <br />
          Built using Jekyll. No copyright held. Aaditya Prakash.
        </footer>
      </div>
    </div>

    
	<!-- Google Analytics -->
	<script>
		(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
		(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
		m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
		})(window,document,'script','//www.google-analytics.com/analytics.js','ga');

		ga('create', 'UA-70371377-1', 'auto');
		ga('send', 'pageview', {
		  'page': '/2012/10/hello-lucene-world-web-implementation/',
		  'title': 'Hello &#8216;Lucene&#8217; World &#8211; Web Implementation'
		});
	</script>
	<!-- End Google Analytics -->


  </body>
</html>
