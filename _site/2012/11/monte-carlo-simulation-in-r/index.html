<!DOCTYPE html>
<html>
  <head>
    <script src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML" type="text/javascript"> </script>
    <title>Monte Carlo Simulation in R – Aaditya Prakash (Adi) – Random Musings of Computer Vision grad student</title>

        <meta charset="utf-8" />
    <meta content='text/html; charset=utf-8' http-equiv='Content-Type'>
    <meta http-equiv='X-UA-Compatible' content='IE=edge'>
    <meta name='viewport' content='width=device-width, initial-scale=1.0, maximum-scale=1.0'>

    
    <meta name="description" content="While the last post dealt with Bootstrap Sampling, no sampling discussion can be complete without discussion &#8216;Monte Carlo&#8217; simulation. Readers please note, I will *not *discuss &#8220;MCMC (Markov Chain Monte Carlo)&#8221; (perhaps in the future). MCMC primarily deals with distribution of equilibrium of the given Markov Chain.
" />
    <meta property="og:description" content="While the last post dealt with Bootstrap Sampling, no sampling discussion can be complete without discussion &#8216;Monte Carlo&#8217; simulation. Readers please note, I will *not *discuss &#8220;MCMC (Markov Chain Monte Carlo)&#8221; (perhaps in the future). MCMC primarily deals with distribution of equilibrium of the given Markov Chain.
" />
    
    <meta name="author" content="Aaditya Prakash (Adi)" />

    
    <meta property="og:title" content="Monte Carlo Simulation in R" />
    <meta property="twitter:title" content="Monte Carlo Simulation in R" />
    

    <!--[if lt IE 9]>
      <script src="http://html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->

    <link rel="stylesheet" type="text/css" href="/style.css" />
    <link rel="alternate" type="application/rss+xml" title="Aaditya Prakash (Adi) - Random Musings of Computer Vision grad student" href="/feed.xml" />

    <!-- Created with Jekyll Now - http://github.com/barryclark/jekyll-now -->
  </head>

  <body>
    <div class="wrapper-masthead">
      <div class="container">
        <header class="masthead clearfix">
          <a href="/" class="site-avatar"><img src="https://raw.githubusercontent.com/iamaaditya/iamaaditya.github.io/master/images/profile_image.jpg" /></a>

          <div class="site-info">
            <h1 class="site-name"><a href="/">Aaditya Prakash (Adi)</a></h1>
            <p class="site-description">Random Musings of Computer Vision grad student</p>
          </div>

          <nav>
            <a href="/">Blog</a>
            <a href="/notes">Notes</a>
            <a href="/about">About</a>
          </nav>
        </header>
      </div>
    </div>

    <div id="main" role="main" class="container">
      <article class="post">
  <h1>Monte Carlo Simulation in R</h1>

  <div class="entry">
    <p>While the last post dealt with Bootstrap Sampling, no sampling discussion can be complete without discussion &#8216;Monte Carlo&#8217; simulation. Readers please note, I will *<em>not *</em>discuss &#8220;MCMC (Markov Chain Monte Carlo)&#8221; <em>(perhaps in the future)</em>. MCMC primarily deals with distribution of equilibrium of the given Markov Chain.</p>

<p>Monte Carlo simulation is much used <em>(perhaps overused)</em> sampling for all physical simulation techniques. While the algorithm for generating Monte Carlo samples is very simple, its usage is widespread. Particularly in Computational Physics for modeling behavior of sub-atomic particles, in Robotics for generating possible states where the actual game state could be exponentially large and in bioinformatics for probabilistic graphical models and last but not least Monte Carlo Integration.</p>

<p>Readers not familiar with Monte Carlo may benefit from this <a href="http://www.cs.otago.ac.nz/cosc453/student_tutorials/monte_carlo.pdf" title="Tutorial on Monte Carlo" target="_blank">tutorial by Jonathan Pengelly</a>, as this blogpost restricts to presenting the simple code in R to do Monte Carlo simulation. Having a clean and grounds-up code is always beneficial as this helps tweak and reformulate the basics.</p>

<p>Following is the output obtained from the code given below:</p>

<h3>Output</h3>

<p><img class="size-medium wp-image-192 " title="Monte Carlo in R" src="http://aaditya.info/blog/wp-content/uploads/2012/11/Monte_Carlo_Simulation_in_R.png" alt="Monte Carlo in R" width="NaN" height="NaN" /></p>

<h3>Code</h3>

<div class="wp_syntax">
  <table>
    <tr>
      <td class="line_numbers">
        <pre>1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
</pre>
      </td>
      
      <td class="code">
        <pre class="rsplus" style="font-family:monospace;"><span style="color: #228B22;">#Monte Carlo simulation </span>
<span style="color: #228B22;">#aaditya - 26/10/2012</span>
&nbsp;
<span style="color: #228B22;">######################################</span>
StartEq <span style="color: #080;">=</span> <span style="color: #ff0000;">100</span>
SuccessPcnt <span style="color: #080;">=</span> <span style="color: #ff0000;">61.54</span>
SuccessAvg <span style="color: #080;">=</span> <span style="color: #ff0000;">2444.78</span>
FailureAvg <span style="color: #080;">=</span> <span style="color: #ff0000;">1667.37</span>
Iterations <span style="color: #080;">=</span> <span style="color: #ff0000;">1000</span>
NoOfEvents <span style="color: #080;">=</span> <span style="color: #ff0000;">100</span>
Rf <span style="color: #080;">=</span> <span style="color: #ff0000;">1</span>
<span style="color: #228B22;">#####################################</span>
eq<span style="color: #080;">&lt;-</span><span style="color: #0000FF; font-weight: bold;">rep</span><span style="color: #080;">&#40;</span>NA, NoOfEvents<span style="color: #080;">&#41;</span>
&nbsp;
doMCRun <span style="color: #080;">&lt;-</span> <span style="color: #0000FF; font-weight: bold;">function</span><span style="color: #080;">&#40;</span><span style="color: #080;">&#41;</span> <span style="color: #080;">&#123;</span>
  eq<span style="color: #080;">&#91;</span><span style="color: #ff0000;">1</span><span style="color: #080;">&#93;</span> <span style="color: #080;">&lt;-</span> StartEq
  <span style="color: #0000FF; font-weight: bold;">for</span><span style="color: #080;">&#40;</span>i <span style="color: #0000FF; font-weight: bold;">in</span> <span style="color: #ff0000;">2</span><span style="color: #080;">:</span>NoOfEvents<span style="color: #080;">&#41;</span> <span style="color: #080;">&#123;</span>
    <span style="color: #0000FF; font-weight: bold;">if</span><span style="color: #080;">&#40;</span><span style="color: #0000FF; font-weight: bold;">runif</span><span style="color: #080;">&#40;</span><span style="color: #ff0000;">1</span>,<span style="color: #ff0000;"></span>,<span style="color: #ff0000;">100</span><span style="color: #080;">&#41;</span><span style="color: #080;">&lt;</span> SuccessPcnt<span style="color: #080;">&#41;</span>
      pl<span style="color: #080;">=</span> SuccessAvg <span style="color: #080;">*</span> Rf
    <span style="color: #0000FF; font-weight: bold;">else</span>
      pl<span style="color: #080;">=</span> <span style="color: #080;">-</span><span style="color: #ff0000;">1</span><span style="color: #080;">*</span>FailureAvg <span style="color: #080;">*</span> Rf
      eq<span style="color: #080;">&#91;</span>i<span style="color: #080;">&#93;</span> <span style="color: #080;">=</span> eq<span style="color: #080;">&#91;</span>i<span style="color: #080;">-</span><span style="color: #ff0000;">1</span><span style="color: #080;">&#93;</span>  <span style="color: #080;">+</span> pl
  <span style="color: #080;">&#125;</span>
  <span style="color: #0000FF; font-weight: bold;">return</span><span style="color: #080;">&#40;</span>eq<span style="color: #080;">&#41;</span>
<span style="color: #080;">&#125;</span>
&nbsp;
values <span style="color: #080;">&lt;-</span> <span style="color: #0000FF; font-weight: bold;">replicate</span><span style="color: #080;">&#40;</span>Iterations, doMCRun<span style="color: #080;">&#40;</span><span style="color: #080;">&#41;</span><span style="color: #080;">&#41;</span>
&nbsp;
<span style="color: #0000FF; font-weight: bold;">par</span><span style="color: #080;">&#40;</span>xaxs<span style="color: #080;">=</span><span style="color: #ff0000;">"i"</span><span style="color: #080;">&#41;</span>
<span style="color: #0000FF; font-weight: bold;">plot</span><span style="color: #080;">&#40;</span><span style="color: #ff0000;">1</span><span style="color: #080;">:</span>NoOfEvents, <span style="color: #0000FF; font-weight: bold;">rep</span><span style="color: #080;">&#40;</span>NA, NoOfEvents <span style="color: #080;">&#41;</span>, 
     xlab<span style="color: #080;">=</span><span style="color: #ff0000;">"Iterations"</span>, ylab<span style="color: #080;">=</span><span style="color: #ff0000;">"Growth"</span>,
     ylim<span style="color: #080;">=</span><span style="color: #0000FF; font-weight: bold;">c</span><span style="color: #080;">&#40;</span><span style="color: #0000FF; font-weight: bold;">min</span><span style="color: #080;">&#40;</span>values<span style="color: #080;">&#41;</span>,<span style="color: #0000FF; font-weight: bold;">max</span><span style="color: #080;">&#40;</span>values<span style="color: #080;">&#41;</span><span style="color: #080;">&#41;</span>,
     xlim<span style="color: #080;">=</span><span style="color: #0000FF; font-weight: bold;">c</span><span style="color: #080;">&#40;</span><span style="color: #ff0000;">1</span>,NoOfEvents<span style="color: #080;">&#41;</span>, main<span style="color: #080;">=</span><span style="color: #ff0000;">"Monte Carlo Simulation"</span><span style="color: #080;">&#41;</span>
<span style="color: #0000FF; font-weight: bold;">matlines</span><span style="color: #080;">&#40;</span>values,type<span style="color: #080;">=</span><span style="color: #ff0000;">"l"</span>,lty<span style="color: #080;">=</span><span style="color: #ff0000;">1</span><span style="color: #080;">&#41;</span>
&nbsp;
sd1 <span style="color: #080;">=</span> <span style="color: #0000FF; font-weight: bold;">sd</span><span style="color: #080;">&#40;</span>values<span style="color: #080;">&#91;</span>NoOfEvents,<span style="color: #080;">&#93;</span><span style="color: #080;">&#41;</span>
mean1 <span style="color: #080;">=</span> <span style="color: #0000FF; font-weight: bold;">mean</span><span style="color: #080;">&#40;</span>values<span style="color: #080;">&#91;</span>NoOfEvents,<span style="color: #080;">&#93;</span><span style="color: #080;">&#41;</span>
<span style="color: #0000FF; font-weight: bold;">print</span><span style="color: #080;">&#40;</span><span style="color: #0000FF; font-weight: bold;">summary</span><span style="color: #080;">&#40;</span>values<span style="color: #080;">&#91;</span>NoOfEvents,<span style="color: #080;">&#93;</span><span style="color: #080;">&#41;</span><span style="color: #080;">&#41;</span>
sdString <span style="color: #080;">=</span> <span style="color: #0000FF; font-weight: bold;">paste</span><span style="color: #080;">&#40;</span><span style="color: #ff0000;">"SD : "</span>, sd1<span style="color: #080;">&#41;</span>
<span style="color: #0000FF; font-weight: bold;">write</span><span style="color: #080;">&#40;</span>sdString, <span style="color: #0000FF; font-weight: bold;">file</span><span style="color: #080;">=</span><span style="color: #ff0000;">""</span><span style="color: #080;">&#41;</span>
outputString <span style="color: #080;">=</span> <span style="color: #0000FF; font-weight: bold;">paste</span><span style="color: #080;">&#40;</span><span style="color: #ff0000;">"With 99.73% confidence the final growth will be between"</span>, 
                     mean1 <span style="color: #080;">-</span> <span style="color: #ff0000;">3</span><span style="color: #080;">*</span>sd1, <span style="color: #ff0000;">" and "</span>, mean1 <span style="color: #080;">+</span> <span style="color: #ff0000;">3</span><span style="color: #080;">*</span>sd1<span style="color: #080;">&#41;</span> 
<span style="color: #0000FF; font-weight: bold;">write</span><span style="color: #080;">&#40;</span>outputString, <span style="color: #0000FF; font-weight: bold;">file</span><span style="color: #080;">=</span><span style="color: #ff0000;">""</span><span style="color: #080;">&#41;</span></pre>
      </td>
    </tr>
  </table>
</div>

  </div>

  <div class="date">
    Written on November 19, 2012
  </div>

  
<div class="comments">
	<div id="disqus_thread"></div>
	<script type="text/javascript">

	    var disqus_shortname = 'iamaaditya';

	    (function() {
	        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
	        dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
	        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
	    })();

	</script>
	<noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
</div>

</article>

    </div>

    <div class="wrapper-footer">
      <div class="container">
        <footer class="footer">
          
<a href="mailto:aprakash [at] brandeis . edu"><i class="svg-icon email"></i></a>


<a href="https://github.com/barryclark/jekyll-now"><i class="svg-icon github"></i></a>

<a href="https://www.linkedin.com/in/http://in.linkedin.com/pub/aaditya-prakash/38/533/684"><i class="svg-icon linkedin"></i></a>

<a href="/feed.xml"><i class="svg-icon rss"></i></a>
<a href="https://www.twitter.com/jekyllrb"><i class="svg-icon twitter"></i></a>


<a href="https://plus.google.com//u/0/100303074762902184969?rel=author"><i class="svg-icon googleplus"></i></a>
        </footer>
      </div>
    </div>

    
	<!-- Google Analytics -->
	<script>
		(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
		(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
		m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
		})(window,document,'script','//www.google-analytics.com/analytics.js','ga');

		ga('create', 'UA-70371377-1', 'auto');
		ga('send', 'pageview', {
		  'page': '/2012/11/monte-carlo-simulation-in-r/',
		  'title': 'Monte Carlo Simulation in R'
		});
	</script>
	<!-- End Google Analytics -->


  </body>
</html>
